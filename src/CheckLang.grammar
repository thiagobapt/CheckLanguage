@top Program { statement* }

statement {  Assignment | expression ";" | If_Statement | While_Statement | For_Statement | Initialization | Function_Declaration }

Initialization { "var" Name "=" expression ";" }

Assignment { Name "=" expression ";" }

If_Statement { "if" "(" Conditional ")" "{" statement* "}" Else_Statement? }

Else_Statement { "else" "{" statement* "}" }

While_Statement { "while" "(" Conditional ")" "{" statement "}" }

For_Statement { "for" "(" Assignment ";" Conditional ";" statement ")" "{" statement* "}" }

Function_Call { Name "(" parameters ")" }

Function_Declaration { "function" Name "(" Parameter_Declaration ")" "{" statement* "}" }

parameters { expression ( "," expression )* }

Parameter_Declaration { Types Name ( "," Types Name )* }

expression { term ( Expression_Operator term )? }

term { factor ( Term_Operator factor )? }

factor { Number | Name | String | Boolean | Function_Call | "(" expression ")" }

Conditional { bool_term ( "or" bool_term )? }

bool_term { bool_factor ( "and" bool_factor )? }

bool_factor { expression Logical_Operator expression }

@skip { space }

@tokens {
  Name { $[a-zA-Z]$[a-zA-Z0-9_]* }
  Number { @digit+ }
  Boolean { "true" | "false" }
  String { '"' (!["\\] | "\\" _)* '"' }
  space { @whitespace+ }
  Logical_Operator { "==" | "!=" | "<" | "<=" | ">" | ">=" }
  Expression_Operator { "+" | "-" }
  Term_Operator { "*" | "/" }
  Types { "string" | "number" | "bool" }
  @precedence { "while", "if", "else", "for", "var", "function", Boolean, Name }
  "(" ")" "{" "}" "=" ";" ","
}

@detectDelim